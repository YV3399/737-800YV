<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="http://jsbsim.sourceforge.net/JSBSim.xsl"?>
<fdm_config name="738" release="BETA" version="2.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="http://jsbsim.sourceforge.net/JSBSim.xsd">
    
    <fileheader>
        <author> Michael Soitanen </author>
        <filecreationdate> 2014-09-30 </filecreationdate>
        <version>$Revison: 1.0 $</version>
        <description> Models a 737-800. </description>
    </fileheader>

<!--
	base datum - nose of aircraft. BWL at this point 208.1 in. Source - structure diagrams.
-->

    <metrics>
        <wingarea unit="FT2"> 1341.00 </wingarea> <!-- value from simulator data. Checked -->
        <wingspan unit="IN">  1350.81 </wingspan> <!-- value from simulator data. Checked -->
        <chord unit="IN">      155.81 </chord> <!-- value from simulator data. Checked -->
        <htailarea unit="FT2"> 352.80 </htailarea> <!-- value from simulator data. Checked -->
        <htailarm unit="IN">   696.72 </htailarm> <!-- value from simulator data. Checked -->
        <vtailarea unit="FT2"> 284.60 </vtailarea> <!-- value from simulator data. Checked -->
        <vtailarm unit="IN">   642.83 </vtailarm> <!-- value from simulator data. Checked -->
        <location name="AERORP" unit="IN">
            <x>  734 </x> <!-- 25% MAC -->
            <y>    0 </y>
            <z>-6.71 </z> <!-- BWL 201.39 -->
        </location>
        <location name="EYEPOINT" unit="IN">
            <x>  98 </x>
            <y> -20 </y>
            <z>  56.18 </z>
        </location>
        <location name="VRP" unit="IN">
            <x> 0 </x>
            <y> 0 </y>
            <z> 0 </z>
        </location>
    </metrics>

    <mass_balance>
        <ixx unit="SLUG*FT2">    562000 </ixx>
        <iyy unit="SLUG*FT2"> 1.473e+06 </iyy>
        <izz unit="SLUG*FT2"> 1.894e+06 </izz>
        <ixy unit="SLUG*FT2">         0 </ixy>
        <ixz unit="SLUG*FT2">      8000 </ixz>
        <iyz unit="SLUG*FT2">         0 </iyz>
        <emptywt unit="LBS">      97060 </emptywt> <!-- based on real info about EI-RUA aircraft. 2 pilots and 5 cabin crew included -->
        <location name="CG" unit="IN">
            <x> 729.56 </x> <!-- based on real info about EI-RUA aircraft. 2 pilots and 5 cabin crew included -->
            <y>   0 </y>
            <z>   0 </z>
        </location>
    </mass_balance>

    <ground_reactions>
        <contact name="Nose Gear" type="BOGEY"> <!-- from AMM - maximum NWG compression is 12 in -->
            <location unit="IN">
                <x> 161 </x>
                <y>   0 </y>
                <z> -101.53 </z> <!-- BWL 106.57 -->
            </location>
            <static_friction>  0.80 </static_friction>
            <dynamic_friction> 0.50 </dynamic_friction>
            <rolling_friction> 0.02 </rolling_friction>
            <spring_coeff unit="LBS/FT"> 60000 </spring_coeff>
            <damping_coeff unit="LBS/FT/SEC"> 2000 </damping_coeff>
            <damping_coeff_rebound unit="LBS/FT/SEC">4000</damping_coeff_rebound>
            <relaxation_velocity>
              <rolling unit="FT/SEC">0.7</rolling>
              <side unit="FT/SEC">0.7</side>
            </relaxation_velocity>
            <force_lag_filter>
              <rolling> 120.0 </rolling>
              <side>120.0 </side>
            </force_lag_filter>
            <wheel_slip_filter> 120.0 </wheel_slip_filter>
            <max_steer unit="DEG"> 78 </max_steer>
            <brake_group> NONE </brake_group>
            <retractable>1</retractable>
        </contact>
        <contact name="Left Main Gear" type="BOGEY">
            <location unit="IN">
                <x>  775 </x>
                <y> -112.5 </y>
                <z>  -109.79 </z> <!-- BWL 98.31 -->
            </location>
            <static_friction>  0.80 </static_friction>
            <dynamic_friction> 0.50 </dynamic_friction>
            <rolling_friction> 0.02 </rolling_friction>
            <spring_coeff unit="LBS/FT"> 120000 </spring_coeff>
            <damping_coeff unit="LBS/FT/SEC"> 10000 </damping_coeff>
            <damping_coeff_rebound unit="LBS/FT/SEC">10000</damping_coeff_rebound>
            <relaxation_velocity>
              <rolling unit="FT/SEC">0.7</rolling>
              <side unit="FT/SEC">0.7</side>
            </relaxation_velocity>
            <force_lag_filter>
              <rolling> 120.0 </rolling>
              <side> 120.0 </side>
            </force_lag_filter>
            <wheel_slip_filter> 120.0 </wheel_slip_filter>
            <max_steer unit="DEG"> 0.0 </max_steer>
            <brake_group> LEFT </brake_group>
            <retractable>1</retractable>
        </contact>
        <contact name="Right Main Gear" type="BOGEY">
            <location unit="IN">
                <x> 775 </x>
                <y> 112.5 </y>
                <z> -109.79 </z> <!-- BWL 98.31 -->
            </location>
            <static_friction>  0.80 </static_friction>
            <dynamic_friction> 0.50 </dynamic_friction>
            <rolling_friction> 0.02 </rolling_friction>
            <spring_coeff unit="LBS/FT"> 120000 </spring_coeff>
            <damping_coeff unit="LBS/FT/SEC"> 10000 </damping_coeff>
            <damping_coeff_rebound unit="LBS/FT/SEC">10000</damping_coeff_rebound>
            <relaxation_velocity>
              <rolling unit="FT/SEC">0.7</rolling>
              <side unit="FT/SEC">0.7</side>
            </relaxation_velocity>
            <force_lag_filter>
              <rolling> 120.0 </rolling>
              <side> 120.0 </side>
            </force_lag_filter>
            <wheel_slip_filter> 120.0 </wheel_slip_filter>
            <max_steer unit="DEG"> 0.0 </max_steer>
            <brake_group> RIGHT </brake_group>
            <retractable>1</retractable>
        </contact>

        <contact type="STRUCTURE" name="TAIL_SKID">
            <location unit="IN">
                <x> 1417.05 </x>
                <y> 0 </y>
                <z> -13.5 </z> <!-- BWL 194.60 -->
            </location>
            <static_friction> 1 </static_friction>
            <dynamic_friction> 1 </dynamic_friction>
            <rolling_friction> 0 </rolling_friction>
            <spring_coeff unit="LBS/FT"> 20000 </spring_coeff>
            <damping_coeff unit="LBS/FT/SEC"> 5000 </damping_coeff>
            <max_steer unit="DEG"> 0 </max_steer>
            <brake_group> NONE </brake_group>
            <retractable> 0 </retractable>
        </contact>
    </ground_reactions>

    <propulsion>
        <engine file="CFM56">
            <location unit="IN">
                <x>  715.6 </x> <!-- value from simulator data -->
                <y> -193.68 </y> <!-- value from simulator data -->
                <z>  -52.38 </z> <!-- BWL 155.72 -->
            </location>
            <orient unit="DEG">
                <roll>  0 </roll>
                <pitch> 0 </pitch>
                <yaw>   1 </yaw>
            </orient>
            <feed>3</feed>
            <thruster file="direct">
                <location unit="IN">
                    <x>  715.6 </x> <!-- value from simulator data -->
                    <y> -193.68 </y> <!-- value from simulator data -->
                    <z>  -52.38 </z> <!-- BWL 155.72 -->
                </location>
                <orient unit="DEG">
                    <roll>  0 </roll>
                    <pitch> 0 </pitch>
                    <yaw>   1 </yaw>
                </orient>
            </thruster>
        </engine>
        <engine file="CFM56">
            <location unit="IN">
                <x> 715.6 </x> <!-- value from simulator data -->
                <y> 193.68 </y> <!-- value from simulator data -->
                <z>  -52.38 </z> <!-- BWL 155.72 -->
            </location>
            <orient unit="DEG">
                <roll>  0 </roll>
                <pitch> 0 </pitch>
                <yaw>  -1 </yaw>
            </orient>
            <feed>4</feed>
            <thruster file="direct">
                <location unit="IN">
                    <x> 715.6 </x> <!-- value from simulator data -->
                    <y> 193.68 </y> <!-- value from simulator data -->
                    <z>  -52.38 </z> <!-- BWL 155.72 -->
                </location>
                <orient unit="DEG">
                    <roll>  0 </roll>
                    <pitch> 0 </pitch>
                    <yaw>   -1 </yaw>
                </orient>
            </thruster>
        </engine>

        <tank type="FUEL"><!-- Left wing tank -->
            <location unit="IN">
                <x> 767.01 </x> <!-- based on trimsheet calculation. Correct value -->
                <y> -80 </y>
                <z> -18 </z>
            </location>
            <drain_location unit="IN">
                <x> 703.09</x> <!-- based on trimsheet calculation. Correct value -->
                <y> -80 </y>
                <z> -18 </z>
            </drain_location>
            <capacity unit="LBS"> 8630 </capacity>
            <contents unit="LBS"> 8630 </contents>
            <temperature> 59.0 </temperature> <!-- Fuel temp in degrees F -->
        </tank>
        <tank type="FUEL"><!-- Right wing tank -->
            <location unit="IN">
                <x> 767.01 </x> <!-- based on trimsheet calculation. Correct value -->
                <y> 80 </y>
                <z> -18 </z>
            </location>
            <drain_location unit="IN">
                <x> 703.09</x> <!-- based on trimsheet calculation. Correct value -->
                <y> 80 </y>
                <z> -18 </z>
            </drain_location>
            <capacity unit="LBS"> 8630 </capacity>
            <contents unit="LBS"> 8630 </contents>
            <temperature> 59.0 </temperature> <!-- Fuel temp in degrees F -->
        </tank>
        <tank type="FUEL"><!-- Center tank -->
            <location unit="IN">
                <x> 675.41 </x> <!-- based on trimsheet calculation. Correct value -->
                <y>   0 </y>
                <z> -18 </z>
            </location>
            <drain_location unit="IN">
                <x> 675.46 </x> <!-- based on trimsheet calculation. Correct value -->
                <y> 0 </y>
                <z> -18 </z>
            </drain_location>
            <capacity unit="LBS"> 28803 </capacity>
            <contents unit="LBS">  9000 </contents>
            <temperature> 59.0 </temperature> <!-- Fuel temp in degrees F -->
        </tank>
        <tank type="FUEL"><!-- Feed pipe for left engine -->
            <location unit="IN">
                <x> 700 </x>
                <y>-193 </y>
                <z> -40 </z>
            </location>
            <capacity unit="LBS"> 0.5 </capacity>
            <contents unit="LBS"> 0.25 </contents>
        </tank>
        <tank type="FUEL"><!-- Feed pipe for right engine -->
            <location unit="IN">
                <x> 700 </x>
                <y> 193 </y>
                <z> -40 </z>
            </location>
            <capacity unit="LBS"> 0.5 </capacity>
            <contents unit="LBS"> 0.25 </contents>
        </tank>
    </propulsion>

   <system file="pushback"/>
   <system file="steering"/>
   <system file="fuel"/>
   <system file="fmc"/>


    <flight_control name="FCS: 737">

        <channel name="Pitch">

            <summer name="Pitch Trim Sum">
                <input>fcs/elevator-cmd-norm</input>
                <clipto>
                    <min>-1</min>
                    <max> 1</max>
                </clipto>
            </summer>

            <aerosurface_scale name="Elevator Control">
                <input>fcs/pitch-trim-sum</input>
                <range>
                    <min>-0.3</min>
                    <max> 0.3</max>
                </range>
                <output>fcs/elevator-pos-rad</output>
            </aerosurface_scale>

            <aerosurface_scale name="Elevator Normalized">
                <input>fcs/elevator-pos-rad</input>
                <domain>
                    <min>-0.3</min>
                    <max> 0.3</max>
                </domain>
                <range>
                    <min>-1</min>
                    <max> 1</max>
                </range>
                <output>fcs/elevator-pos-norm</output>
            </aerosurface_scale>

        </channel>
        <channel name="Roll">

            <summer name="Roll Trim Sum">
                <input>fcs/aileron-cmd-norm</input>
                <input>fcs/roll-trim-cmd-norm</input>
                <clipto>
                    <min>-1</min>
                    <max> 1</max>
                </clipto>
            </summer>

            <fcs_function name="Left Aileron Control">
                <function>
                    <table>
                        <independentVar>fcs/roll-trim-sum</independentVar>
                        <tableData>
                            -1              -0.3577924967
                            -0.9195402299   -0.3271881482
                            -0.8620689655   -0.3028076439
                            -0.8045977011   -0.2784271396
                            -0.7471264368   -0.2540448899
                            -0.6896551724   -0.2296643856
                            -0.632183908    -0.2078407886
                            -0.5747126437   -0.1861428554
                            -0.5172413793   -0.1644445731
                            -0.4597701149   -0.1427468143
                            -0.4022988506   -0.1210490556
                            -0.3448275862   -0.0993512969
                            -0.2873563218   -0.0792398679
                            -0.2298850575   -0.0591930161
                            -0.1724137931   -0.0391461643
                            -0.1149425287   -0.0198375868
                            -0.0574712644   -0.000818809
                            0               0.0181999444
                            0.0574712644    0.035044117
                            0.1149425287    0.0518179528
                            0.1724137931    0.0685919632
                            0.2298850575    0.085421126
                            0.2873563218    0.1023026486
                            0.3448275862    0.1191841713
                            0.4022988506    0.1345229974
                            0.4597701149    0.1495581363
                            0.5172413793    0.1645932751
                            0.5747126437    0.1796275413
                            0.632183908     0.1946635528
                            0.6896551724    0.209697819
                            0.7471264368    0.2231124196
                            0.8045977011    0.2363751766
                            0.8620689655    0.2496361882
                            0.9195402299    0.2628989452
                            1               0.2705260341
                        </tableData>
                    </table>
                </function>
                <output>fcs/left-aileron-pos-rad</output>
            </fcs_function>

            <fcs_function name="Right Aileron Control">
                <function>
                    <table>
                        <independentVar>fcs/roll-trim-sum</independentVar>
                        <tableData>
                            -1              0.2705260341
                            -0.9195402299   0.2628989452
                            -0.8620689655   0.2496361882
                            -0.8045977011   0.2363751766
                            -0.7471264368   0.2231124196
                            -0.6896551724   0.209697819
                            -0.632183908    0.1946635528
                            -0.5747126437   0.1796275413
                            -0.5172413793   0.1645932751
                            -0.4597701149   0.1495581363
                            -0.4022988506   0.1345229974
                            -0.3448275862   0.1191841713
                            -0.2873563218   0.1023026486
                            -0.2298850575   0.085421126
                            -0.1724137931   0.0685919632
                            -0.1149425287   0.0518179528
                            -0.0574712644   0.035044117
                            0               0.0181999444
                            0.0574712644    -0.000818809
                            0.1149425287    -0.0198375868
                            0.1724137931    -0.0391461643
                            0.2298850575    -0.0591930161
                            0.2873563218    -0.0792398679
                            0.3448275862    -0.0993512969
                            0.4022988506    -0.1210490556
                            0.4597701149    -0.1427468143
                            0.5172413793    -0.1644445731
                            0.5747126437    -0.1861428554
                            0.632183908     -0.2078407886
                            0.6896551724    -0.2296643856
                            0.7471264368    -0.2540448899
                            0.8045977011    -0.2784271396
                            0.8620689655    -0.3028076439
                            0.9195402299    -0.3271881482
                            1               -0.3577924967
                        </tableData>
                    </table>
                </function>
                <output>fcs/right-aileron-pos-rad</output>
            </fcs_function>

           <aerosurface_scale name="Left aileron Normalized">
                <input>fcs/left-aileron-pos-rad</input>
                <domain>
                    <min>-0.35</min>
                    <max> 0.35</max>
                </domain>
                <range>
                    <min>-1</min>
                    <max> 1</max>
                </range>
                <output>fcs/left-aileron-pos-norm</output>
            </aerosurface_scale>

            <aerosurface_scale name="Right aileron Normalized">
                <input>fcs/right-aileron-pos-rad</input>
                <domain>
                    <min>-0.35</min>
                    <max> 0.35</max>
                </domain>
                <range>
                    <min>-1</min>
                    <max> 1</max>
                </range>
                <output>fcs/right-aileron-pos-norm</output>
            </aerosurface_scale>

        </channel>
        <channel name="Yaw">

            <summer name="Rudder Command Sum">
                <input>fcs/rudder-cmd-norm</input>
                <input>fcs/yaw-trim-cmd-norm</input>
                <clipto>
                    <min>-1</min>
                    <max> 1</max>
                </clipto>
            </summer>

            <scheduled_gain name="Yaw Damper">
                <input>velocities/r-aero-rad_sec</input>
                <table>
                  <independentVar>velocities/mach</independentVar>
                    <tableData>
                        0.00	0.0
                        0.10	0.0
                        0.11	1.0
                    </tableData>
                </table>
            </scheduled_gain>

            <scheduled_gain name="Yaw Damper Final">
                <input>fcs/yaw-damper</input>
                <table>
                  <independentVar>velocities/mach</independentVar>
                    <tableData>
                        0.00	0.0
                        0.10	0.0
                        0.11	1.0
                    </tableData>
                </table>
            </scheduled_gain>

            <summer name="Rudder Sum">
                <input>fcs/rudder-command-sum</input>
                <input>fcs/yaw-damper-final</input>
                <clipto>
                    <min>-1</min>
                    <max> 1</max>
                </clipto>
            </summer>

            <aerosurface_scale name="Rudder Control">
                <input>fcs/rudder-sum</input>
                <range>
                    <min>-0.35</min>
                    <max> 0.35</max>
                </range>
                <output>fcs/rudder-pos-rad</output>
            </aerosurface_scale>

            <aerosurface_scale name="Rudder Normalized">
                <input>fcs/rudder-pos-rad</input>
                <domain>
                    <min>-0.35</min>
                    <max> 0.35</max>
                </domain>
                <range>
                    <min>-1</min>
                    <max> 1</max>
                </range>
                <output>fcs/rudder-pos-norm</output>
            </aerosurface_scale>

        </channel>
        <channel name="Flaps">

            <kinematic name="Flaps Control">
                <input>fcs/flap-cmd-norm</input>
                <traverse>
                    <setting>
                        <position>0</position>
                        <time>0</time>
                    </setting>
                    <setting>
                        <position>0.125</position>
                        <time>13</time>
                    </setting>
                    <setting>
                        <position>0.25</position>
                        <time>3</time>
                    </setting>
                    <setting>
                        <position>0.375</position>
                        <time>4</time>
                    </setting>
                    <setting>
                        <position>0.5</position>
                        <time>2</time>
                    </setting>
                    <setting>
                        <position>0.625</position>
                        <time>3</time>
                    </setting>
                    <setting>
                        <position>0.75</position>
                        <time>2</time>
                    </setting>
                    <setting>
                        <position>0.875</position>
                        <time>5</time>
                    </setting>
                    <setting>
                        <position>1</position>
                        <time>5</time>
                    </setting>
                </traverse>
                <output>fcs/flap-pos-norm</output>
            </kinematic>

        </channel>
        <channel name="Landing Gear">

            <kinematic name="Gear Control">
                <input>gear/gear-cmd-norm</input>
                <traverse>
                    <setting>
                        <position>0</position>
                        <time>0</time>
                    </setting>
                    <setting>
                        <position>1</position>
                        <time>5</time>
                    </setting>
                </traverse>
                <output>gear/gear-pos-norm</output>
            </kinematic>

        </channel>

        <channel name="Flight Spoilers">
          <!-- operated by the speedbrake handle and roll control -->

          <fcs_function name="Left outbrd spoilers command">
                <function>
                    <table>
                        <independentVar>fcs/roll-trim-sum</independentVar>
                        <tableData>
-1  33.0184
-0.9885057471   33.0184
-0.9770114943   33.0184
-0.9655172414   33.0184
-0.9540229885   32.7803
-0.9425287356   32.444
-0.9310344828   32.10765
-0.9195402299   31.77135
-0.908045977    31.43505
-0.8965517241   31.08955
-0.8850574713   30.6224
-0.8735632184   30.08215
-0.8620689655   29.378
-0.8505747126   28.67385
-0.8390804598   27.9697
-0.8275862069   27.26555
-0.816091954    26.5761
-0.8045977011   25.93135
-0.7931034483   25.2966
-0.7816091954   24.6618
-0.7701149425   24.02705
-0.7586206897   23.3923
-0.7471264368   22.7575
-0.7356321839   22.12275
-0.724137931    21.488
-0.7126436782   20.85325
-0.7011494253   20.2185
-0.6896551724   19.58375
-0.6781609195   19.04075
-0.6666666667   18.52865
-0.6551724138   18.0166
-0.6436781609   17.5045
-0.632183908    16.99245
-0.6206896552   16.48035
-0.6091954023   15.9683
-0.5977011494   15.468
-0.5862068966   14.9896
-0.5747126437   14.52185
-0.5632183908   14.0885
-0.5517241379   13.65515
-0.5402298851   13.22175
-0.5287356322   12.7883
-0.5172413793   12.33675
-0.5057471264   11.8852
-0.4942528736   11.4337
-0.4827586207   11.0293
-0.4712643678   10.676655
-0.4597701149   10.33607
-0.4482758621   9.995485
-0.4367816092   9.6549
-0.4252873563   9.314265
-0.4137931034   8.973695
-0.4022988506   8.6331
-0.3908045977   8.29243
-0.3793103448   7.944395
-0.367816092    7.59636
-0.3563218391   7.248325
-0.3448275862   6.90029
-0.3333333333   6.552255
-0.3218390805   6.2255
-0.3103448276   5.932125
-0.2988505747   5.638755
-0.2873563218   5.345385
-0.275862069    5.052015
-0.2643678161   4.75864
-0.2528735632   4.46527
-0.2413793103   4.15397
-0.2298850575   3.83479
-0.2183908046   3.440555
-0.2068965517   3.040925
-0.1954022989   2.574015
-0.183908046    2.030135
-0.1724137931   1.4862485
-0.1609195402   0.942369
-0.1494252874   0.5379572
-0.1379310345   0.2302212
-0.1264367816   0
-0.1149425287   0
-0.1034482759   0
-0.091954023    0
-0.0804597701   0
-0.0689655172   0
-0.0574712644   0
-0.0459770115   0
-0.0344827586   0
-0.0229885057   0
-0.0114942529   0
0   0
                        </tableData>
                    </table>
                </function>
                <output>fcs/spoilers-23-cmd</output>
            </fcs_function>

            <actuator name="Spoilers 23 pos deg">
                <input>fcs/spoilers-23-cmd</input>
                <lag>0</lag>
                <rate_limit>100</rate_limit>
                <bias>0</bias>
                <deadband_width>1</deadband_width>
                <hysteresis_width>2</hysteresis_width>
                <output>fcs/spoilers-23-pos</output>
            </actuator>


            <kinematic name="Flight Spoilers Control">
                <input>fcs/speedbrake-cmd-norm</input>
                <traverse>
                    <setting>
                        <position>0</position>
                        <time>0</time>
                    </setting>
                    <setting>
                        <position>1</position>
                        <time>0.6</time>
                    </setting>
                </traverse>
                <output>fcs/speedbrake-pos-norm</output>
            </kinematic>

        </channel>

        <channel name="Ground Spoilers">
          <!-- these only operate on the ground -->
            <kinematic name="Ground Spoilers Control">
                <input>fcs/spoiler-cmd-norm</input>
                <traverse>
                    <setting>
                        <position>0</position>
                        <time>0</time>
                    </setting>
                    <setting>
                        <position>1</position>
                        <time>0.6</time>
                    </setting>
                </traverse>
                <output>fcs/spoiler-pos-norm</output>
            </kinematic>

        </channel>

        <channel name="Stabilizer">
          
          <pure_gain name="fcs/stabilizer/trim-rate-per-tick">
            <input>fcs/stabilizer/trim-rate</input>
            <gain>simulation/dt</gain>
          </pure_gain>

          <summer name="fcs/stabilizer/errorfree-stab-error">
            <input> fcs/stabilizer/stab-target </input>
            <input>-fcs/stabilizer-pos-unit </input>
            <clipto>
              <min>-fcs/stabilizer/trim-rate-per-tick</min>
              <max> fcs/stabilizer/trim-rate-per-tick</max>
            </clipto>
            <output>fcs/stabilizer/stab-error</output>
          </summer>

          <summer name="fcs/stabilizer/stabilizer-pos-unit">
            <input> fcs/stabilizer-pos-unit </input>
            <input> fcs/stabilizer/stab-error </input>
            <output>fcs/stabilizer-pos-unit</output>
          </summer>

            <fcs_function name="fcs/stab">
            <function>
              <product>
                <sum>
                    <property>fcs/stabilizer-pos-unit</property>
                    <value>-4</value>
                </sum>
                <value>-1</value>
              </product>
            </function>
          </fcs_function>

        </channel>

        <channel name="Autobrake">

          <switch name="fcs/autobrake/errorfree-target-decel-fps_sec2-filtered">
            <default value="fcs/autobrake/target-decel-fps_sec2"/>
            <test value="12">
              velocities/u-fps LE 134
              fcs/autobrake/target-decel-fps_sec2 == 14
            </test>
            <output>fcs/autobrake/target-decel-fps_sec2-filtered</output>
          </switch>

          <summer name="fcs/autobrake/time-work">
            <input> sim-time-sec </input>
            <input>-fcs/autobrake/start-time-sec </input>
          </summer>

          <pure_gain name="fcs/autobrake/target-decel-15sec">
            <input>fcs/autobrake/time-work</input>
            <gain>2</gain>
          </pure_gain>

          <fcs_function name="fcs/autobrake/target-decel-25sec">
            <function>
              <sum>
                <product>
                  <property>fcs/autobrake/time-work</property>
                  <sum>
                    <property>fcs/autobrake/target-decel-fps_sec2-filtered</property>
                    <value>-3</value>
                  </sum>
                </product>
                <sum>
                  <value>3</value>
                  <product>
                    <sum>
                      <property>fcs/autobrake/target-decel-fps_sec2-filtered</property>
                      <value>-3</value>
                    </sum>
                    <value>-1.5</value>
                  </product>
                </sum>
              </sum>
            </function>
          </fcs_function>

          <switch name="fcs/autobrake/errorfree-target-decel-fps_sec2-final">
            <default value="fcs/autobrake/target-decel-fps_sec2-filtered"/>
            <test value="25">
              fcs/autobrake/target-decel-fps_sec2-filtered == 25
            </test>
            <test value="fcs/autobrake/target-decel-15sec">
              fcs/autobrake/time-work LE 1.5
            </test>
            <test value="fcs/autobrake/target-decel-25sec">
              fcs/autobrake/time-work LE 2.5
              fcs/autobrake/time-work GT 1.5
            </test>
            <output>fcs/autobrake/target-decel-fps_sec2-final</output>
          </switch>

          <summer name="fcs/autobrake/decel-error">
            <input> fcs/autobrake/target-decel-fps_sec2-final </input>
            <input> accelerations/udot-ft_sec2 </input>
          </summer>

          <pure_gain>
            <input>fcs/autobrake/decel-error</input>
            <gain>0.01</gain>
            <output>fcs/autobrake/brake-cmd-gain</output>
          </pure_gain>

          <summer name="fcs/autobrake/errorfree-autobrake-cmd">
            <input> fcs/autobrake/autobrake-cmd </input>
            <input> fcs/autobrake/brake-cmd-gain </input>
            <clipto>
             <min>0</min>
             <max>1</max>
            </clipto>
            <output>fcs/autobrake/autobrake-cmd</output>
          </summer>

          <switch name="fcs/autobrake/brake-left-cmd-final">
            <default value="fcs/brake-left-cmd"/>
            <test value="fcs/autobrake/autobrake-cmd">
              fcs/autobrake/autobrake-in-use == 1
            </test>
            <output>fcs/left-brake-cmd-norm</output>
          </switch>

          <switch name="fcs/autobrake/brake-right-cmd-final">
            <default value="fcs/brake-right-cmd"/>
            <test value="fcs/autobrake/autobrake-cmd">
              fcs/autobrake/autobrake-in-use == 1
            </test>
            <output>fcs/right-brake-cmd-norm</output>
          </switch>

        </channel>

        <channel name="Throttle">

          <summer name="fcs/throttle/after-landing-time">
            <input> sim-time-sec </input>
            <input>-/b737/sensors/landing-time </input>
          </summer>

          <switch name="fcs/throttle/high-idle">
            <default value="0.119"/>
            <test value="0">
              fcs/throttle/after-landing-time GT 4
              /gear/gear[0]/wow == 1
              /gear/gear[1]/wow == 1
              /gear/gear[2]/wow == 1
            </test>
          </switch>

             <fcs_function name="fcs/throttle/throttle-cmd-norm[0]">
                 <function>
                     <product>
                         <property>/autopilot/internal/servo-throttle[0]</property>
             <value>1</value>
                     </product>
                 </function>
               <output>fcs/throttle-cmd-norm[0]</output>
             </fcs_function>

  <summer name="fcs/throttle/throttle-pos-norm[0]">
    <input>fcs/throttle/throttle-cmd-norm[0]</input>
      <clipto>
        <min>fcs/throttle/high-idle</min>
        <max>1</max>
      </clipto>
    <output>fcs/throttle-pos-norm[0]</output>
  </summer>

             <fcs_function name="fcs/throttle/throttle-cmd-norm[1]">
                 <function>
                     <product>
                         <property>/autopilot/internal/servo-throttle[1]</property>
             <value>1</value>
                     </product>
                 </function>
               <output>fcs/throttle-cmd-norm[1]</output>
             </fcs_function>

  <summer name="fcs/throttle/throttle-pos-norm[1]">
    <input>fcs/throttle/throttle-cmd-norm[1]</input>
      <clipto>
        <min>fcs/throttle/high-idle</min>
        <max>1</max>
      </clipto>
    <output>fcs/throttle-pos-norm[1]</output>
  </summer>

        </channel>

    </flight_control>

    <aerodynamics>

        <function name="aero/function/kCDge">
            <description>Change_in_drag_due_to_ground_effect</description>
            <product>
                  <table>
                      <independentVar>aero/h_b-mac-ft</independentVar>
                      <tableData>
                          0.0000	0.4800
                          0.1000	0.5150
                          0.1500	0.6290
                          0.2000	0.7090
                          0.3000	0.8150
                          0.4000	0.8820
                          0.5000	0.9280
                          0.6000	0.9620
                          0.7000	0.9880
                          0.8000	1.0000
                      </tableData>
                  </table>
            </product>
        </function>

        <function name="aero/function/kCLge">
            <description>Change_in_lift_due_to_ground_effect</description>
            <product>
                  <table>
                      <independentVar>aero/h_b-mac-ft</independentVar>
                      <tableData>
                          0.0000	1.2030
                          0.1000	1.1270
                          0.1500	1.0900
                          0.2000	1.0730
                          0.3000	1.0460
                          0.4000	1.0550
                          0.5000	1.0190
                          0.6000	1.0130
                          0.7000	1.0080
                          0.8000	1.0060
                          0.9000	1.0030
                          1.0000	1.0020
                          1.1000	1.0000
                      </tableData>
                  </table>
            </product>
        </function>

        <function name="aero/function/kCLsb">
            <description>Change_in_lift_due_to_speed_brake</description>
            <product>
                  <table>
                      <independentVar>fcs/speedbrake-pos-norm</independentVar>
                      <tableData>
                          0.0000	1.0
                          0.1000	0.85
                      </tableData>
                  </table>
            </product>
        </function>

        <function name="aero/function/kCLsp">
            <description>Change_in_lift_due_to_spoilers</description>
            <product>
                  <table>
                      <independentVar>fcs/spoiler-pos-norm</independentVar>
                      <tableData>
                          0.0000	1.0
                          0.1000	0.6
                      </tableData>
                  </table>
            </product>
        </function>

        <axis name="DRAG">

            <function name="aero/coefficient/CD0">
                <description>Drag_at_zero_lift</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                      <table>
                          <independentVar>aero/alpha-rad</independentVar>
                          <tableData>
                             -1.57	1.5000
                             -0.26	0.0420
                              0.00	0.0210
                              0.26	0.0420
                              1.57	1.5000
                          </tableData>
                      </table>
                </product>
            </function>

            <function name="aero/coefficient/CDi">
                <description>Induced_drag</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>aero/cl-squared</property>
                    <property>aero/function/kCDge</property>
                    <value>0.043</value>
                </product>
            </function>

            <function name="aero/coefficient/CDmach">
                <description>Drag_due_to_mach</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                      <table>
                          <independentVar>velocities/mach</independentVar>
                          <tableData>
                              0.00	0.0000
                              0.79	0.0000
                              1.10	0.0230
                              1.80	0.0150
                          </tableData>
                      </table>
                </product>
            </function>

            <function name="aero/coefficient/CDflap">
                <description>Drag_due_to_flaps</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>fcs/flap-pos-norm</property>
                    <value>0.059</value>
                </product>
            </function>

            <function name="aero/coefficient/CDgear">
                <description>Drag_due_to_gear</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>gear/gear-pos-norm</property>
                    <value>0.015</value>
                </product>
            </function>

            <function name="aero/coefficient/CDsb">
                <description>Drag_due_to_flight_spoilers</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>fcs/speedbrake-pos-norm</property>
                    <value>0.02</value>
                </product>
            </function>

            <function name="aero/coefficient/CDsp">
                <description>Drag_due_to_ground_spoilers</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>fcs/spoiler-pos-norm</property>
                    <value>0.04</value>
                </product>
            </function>

            <function name="aero/coefficient/CDbeta">
                <description>Drag_due_to_sideslip</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                      <table>
                          <independentVar>aero/beta-rad</independentVar>
                          <tableData>
                             -1.57	1.2300
                             -0.26	0.0500
                              0.00	0.0000
                              0.26	0.0500
                              1.57	1.2300
                          </tableData>
                      </table>
                </product>
            </function>

            <function name="aero/coefficient/CDde">
                <description>Drag_due_to_Elevator_Deflection</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>fcs/elevator-pos-norm</property>
                    <value>0.059</value>
                </product>
            </function>

        </axis>

        <axis name="SIDE">
            <function name="aero/coefficient/CYb">
                <description>Side_force_due_to_beta</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>aero/beta-rad</property>
                    <value>-1</value>
                </product>
            </function>
        </axis>

        <axis name="LIFT">

            <function name="aero/coefficient/CLalpha">
                <description>Lift_due_to_alpha</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>aero/function/kCLge</property>
                    <property>aero/function/kCLsb</property>
                    <property>aero/function/kCLsp</property>
                    <sum>
                    <table>
                        <independentVar>aero/alpha-rad</independentVar>
                        <tableData>
                            -0.1745 -0.9675
                            -0.1571 -0.8566
                            -0.1396 -0.7455
                            -0.1222 -0.6345
                            -0.1047 -0.5235
                            -0.0873 -0.4125
                            -0.0698 -0.3014
                            -0.0524 -0.1904
                            -0.0349 -0.0795
                            -0.0175 0.0324
                            0       0.1451
                            0.0175  0.2577
                            0.0349  0.3704
                            0.0524  0.483
                            0.0698  0.5874
                            0.0873  0.6906
                            0.1047  0.7939
                            0.1222  0.8796
                            0.1396  0.9597
                            0.1571  1.0397
                            0.1745  1.1296
                            0.192   1.2223
                            0.2094  1.3151
                            0.2269  1.4002
                            0.2443  1.4523
                            0.2618  1.5043
                            0.2793  1.5335
                            0.2967  1.5532
                            0.3142  1.5116
                            0.3316  1.4276
                            0.3491  1.3599
                            0.3665  1.3114
                            0.384   1.2664
                            0.4014  1.2521
                            0.4189  1.2431
                            0.4363  1.2465
                            0.4538  1.2499
                            0.4712  1.2534
                            0.4887  1.2569
                            0.5061  1.2549
                            0.5236  1.2521
                            0.5411  1.2494
                            0.5585  1.2466
                            0.576   1.244
                            0.5934  1.2447
                            0.6109  1.2455
                            0.6283  1.2462
                            0.6458  1.2469
                            0.6632  1.2476
                            0.6807  1.2484
                            0.6981  1.2491
                            0.7156  1.2497
                            0.733   1.2489
                            0.7505  1.2481
                            0.7679  1.2474
                            0.7854  1.2465
                            0.8029  1.2457
                            0.8203  1.245
                            0.8378  1.2442
                            0.8552  1.2433
                            0.8727  1.2426
                        </tableData>
                    </table>
                    <property>metrics/lift</property>
                </sum>
                </product>
            </function>

            <function name="aero/coefficient/dCLflap">
                <description>Delta_Lift_due_to_flaps</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>aero/function/kCLge</property>
                    <property>aero/function/kCLsb</property>
                    <property>aero/function/kCLsp</property>
                    <table>
                        <independentVar>fcs/flap-pos-norm</independentVar>
                        <tableData>
                            0       0
                            0.125   0.103
                            0.375   0.267
                            0.625   0.438
                            0.875   0.701
                            1       0.953
                        </tableData>
                    </table>
                </product>
            </function>

            <function name="aero/coefficient/CLde">
                <description>Lift_due_to_Elevator_Deflection</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>fcs/elevator-pos-rad</property>
                    <value>0.2</value>
                </product>
            </function>

            <function name="aero/coefficient/CLdstab">
                <description>Lift_due_to_Stabilizer_Deflection</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>fcs/stab</property>
                    <value>0.007</value>
                </product>
            </function>

            <function name="aero/coefficient/CLdlail">
                <description>Lift_due_to_Left_Aileron_Deflection</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>fcs/left-aileron-pos-rad</property>
                    <value>0.07</value>
                </product>
            </function>

            <function name="aero/coefficient/CLdrail">
                <description>Lift_due_to_Right_Aileron_Deflection</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>fcs/right-aileron-pos-rad</property>
                    <value>0.07</value>
                </product>
            </function>

        </axis>

        <axis name="ROLL">

            <function name="aero/coefficient/Clb">
                <description>Roll_moment_due_to_beta</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>metrics/bw-ft</property>
                    <property>aero/beta-rad</property>
                    <value>-0.09</value>
                </product>
            </function>

            <function name="aero/coefficient/Clp">
                <description>Roll_moment_due_to_roll_rate</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>metrics/bw-ft</property>
                    <property>aero/bi2vel</property>
                    <property>velocities/p-aero-rad_sec</property>
                    <value>-0.4</value>
                </product>
            </function>

            <function name="aero/coefficient/Clr">
                <description>Roll_moment_due_to_yaw_rate</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>metrics/bw-ft</property>
                    <property>aero/bi2vel</property>
                    <property>velocities/r-aero-rad_sec</property>
                    <value>0.09</value>
                </product>
            </function>

            <function name="aero/coefficient/Cldla">
                <description>Roll_moment_due_to_left_aileron</description>
                <product>
                    <property>aero/coefficient/CLdlail</property>
                    <value>44.5</value>
                </product>
            </function>

            <function name="aero/coefficient/Cldra">
                <description>Roll_moment_due_to_right_aileron</description>
                <product>
                    <property>aero/coefficient/CLdrail</property>
                    <value>-44.5</value>
                </product>
            </function>

            <function name="aero/coefficient/Cldr">
                <description>Roll_moment_due_to_rudder</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>metrics/bw-ft</property>
                    <property>fcs/rudder-pos-rad</property>
                    <value>0.01</value>
                </product>
            </function>
        </axis>

        <axis name="PITCH">
            <function name="aero/coefficient/Cmalpha">
                <description>Pitch_moment_due_to_alpha</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>metrics/cbarw-ft</property>
                    <property>aero/alpha-rad</property>
                    <value>-0.6</value>
                </product>
            </function>
            <function name="aero/coefficient/Cmde">
                <description>Pitch_moment_due_to_elevator</description>
                <product>
                    <property>metrics/lh-ft</property>
                    <property>aero/coefficient/CLde</property>
                    <value>-1</value>
                </product>
            </function>
            <function name="aero/coefficient/Cmdstab">
                <description>Pitch_moment_due_to_stabilizer</description>
                <product>
                    <property>metrics/lh-ft</property>
                    <property>aero/coefficient/CLdstab</property>
                    <value>-1</value>
                </product>
            </function>
            <function name="aero/coefficient/Cmq">
                <description>Pitch_moment_due_to_pitch_rate</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>metrics/cbarw-ft</property>
                    <property>aero/ci2vel</property>
                    <property>velocities/q-aero-rad_sec</property>
                    <value>-27.0</value>
                </product>
            </function>
            <function name="aero/coefficient/Cmadot">
                <description>Pitch_moment_due_to_alpha_rate</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>metrics/cbarw-ft</property>
                    <property>aero/ci2vel</property>
                    <property>aero/alphadot-rad_sec</property>
                    <value>-16.0</value>
                </product>
            </function>
        </axis>

        <axis name="YAW">
            <function name="aero/coefficient/Cnb">
                <description>Yaw_moment_due_to_beta</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>metrics/bw-ft</property>
                    <property>aero/beta-rad</property>
                    <value>0.26</value>
                </product>
            </function>
            <function name="aero/coefficient/Cnr">
                <description>Yaw_moment_due_to_yaw_rate</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>metrics/bw-ft</property>
                    <property>aero/bi2vel</property>
                    <property>velocities/r-aero-rad_sec</property>
                    <value>-0.35</value>
                </product>
            </function>
            <function name="aero/coefficient/Cndr">
                <description>Yaw_moment_due_to_rudder</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>metrics/bw-ft</property>
                    <property>fcs/rudder-pos-rad</property>
                    <value>-0.20</value>
                </product>
            </function>
        </axis>
    </aerodynamics>

    <external_reactions>

 <force name="pushback" frame="BODY">
  <location unit="IN">
   <x>  -139 </x>
   <y>    0.0 </y>
   <z>  -71.0 </z>
  </location>
  <direction>
   <x>1</x>
   <y>0</y>
   <z>0</z>
  </direction>
 </force>

</external_reactions>


<!--
    <output name="B737_datalog.csv" rate="20" type="CSV">
        <property> aero/qbar-psf </property>
        <property> attitude/phi-rad </property>
        <property> position/h-sl-ft </property>
        <property> velocities/vc-kts </property>
        <property> fcs/throttle-cmd-norm </property>
        <property> fcs/elevator-pos-norm </property>
        <rates> ON </rates>
        <velocities> ON </velocities>
        <forces> ON </forces>
        <moments> ON </moments>
        <position> ON </position>
        <propulsion> ON </propulsion>
        <aerosurfaces> OFF </aerosurfaces>
        <fcs> OFF </fcs>
        <ground_reactions> ON </ground_reactions>
    </output>
-->
</fdm_config>

